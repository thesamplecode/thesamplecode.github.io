<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>C 基础 | 云速查表</title>
    <meta name="generator" content="VuePress 1.5.2">
    <link rel="icon" href="/img/favicon.ico">
    <meta name="description" content="web前端技术博客,简洁至上,专注web前端学习与总结。JavaScript,js,ES6,TypeScript,vue,python,css3,html5,Node,git,github等技术文章。">
    <meta name="keywords" content="前端博客,个人技术博客,前端,前端开发,前端框架,web前端,前端面试题,技术文档,学习,面试,JavaScript,js,ES6,TypeScript,vue,python,css3,html5,Node,git,github,markdown">
    <meta name="baidu-site-verification" content="7F55weZDDc">
    <meta name="theme-color" content="#11a8cd">
    <link rel="preload" href="/assets/css/0.styles.bd69373a.css" as="style"><link rel="preload" href="/assets/js/app.c9fc3f08.js" as="script"><link rel="preload" href="/assets/js/2.72085123.js" as="script"><link rel="preload" href="/assets/js/7.bfc3c3b0.js" as="script"><link rel="prefetch" href="/assets/js/10.3d5d1111.js"><link rel="prefetch" href="/assets/js/11.e0fbdb3e.js"><link rel="prefetch" href="/assets/js/12.93d5952c.js"><link rel="prefetch" href="/assets/js/13.68708979.js"><link rel="prefetch" href="/assets/js/14.6ec330d3.js"><link rel="prefetch" href="/assets/js/15.60eef0f8.js"><link rel="prefetch" href="/assets/js/16.186a164c.js"><link rel="prefetch" href="/assets/js/17.d73d4f89.js"><link rel="prefetch" href="/assets/js/18.b3723dfe.js"><link rel="prefetch" href="/assets/js/19.9c94ee8a.js"><link rel="prefetch" href="/assets/js/20.e76fad48.js"><link rel="prefetch" href="/assets/js/21.537e2129.js"><link rel="prefetch" href="/assets/js/22.ebc33d36.js"><link rel="prefetch" href="/assets/js/23.3184ddd9.js"><link rel="prefetch" href="/assets/js/24.d6e5f8b2.js"><link rel="prefetch" href="/assets/js/25.0a8db750.js"><link rel="prefetch" href="/assets/js/26.20176e89.js"><link rel="prefetch" href="/assets/js/27.c4f08141.js"><link rel="prefetch" href="/assets/js/28.1833be56.js"><link rel="prefetch" href="/assets/js/29.e667cf49.js"><link rel="prefetch" href="/assets/js/3.6e17e0d4.js"><link rel="prefetch" href="/assets/js/30.b2d89075.js"><link rel="prefetch" href="/assets/js/31.0a5afe0f.js"><link rel="prefetch" href="/assets/js/32.3596c0d2.js"><link rel="prefetch" href="/assets/js/33.c810b383.js"><link rel="prefetch" href="/assets/js/34.91e16bbd.js"><link rel="prefetch" href="/assets/js/4.153669a3.js"><link rel="prefetch" href="/assets/js/5.fc58047b.js"><link rel="prefetch" href="/assets/js/6.6dc54097.js"><link rel="prefetch" href="/assets/js/8.52391ceb.js"><link rel="prefetch" href="/assets/js/9.79867b0e.js">
    <link rel="stylesheet" href="/assets/css/0.styles.bd69373a.css">
  </head>
  <body class="theme-mode-light">
    <div id="app" data-server-rendered="true"><div class="theme-container have-rightmenu"><header class="navbar blur" style="text-align:center;"><div title="目录" class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active" style="position:absolute;left:1rem;"><img src="/img/EB-logo.png" alt="云速查表" class="logo" style="margin-right:0;"> <span class="site-name can-hide">云速查表</span></a> <div class="search-box" style="text-align:left;"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <span style="font-weight: bolder;font-size: large;">速查一下</span> <div class="links"><!----></div></header> <div class="sidebar-mask"></div> <aside class="sidebar" style="display:none;"><!----> <!---->  <ul class="sidebar-links"><li><a href="/pages/9ed42d/" class="sidebar-link">C 代码规范</a></li><li><a href="/pages/f8a00e/" aria-current="page" class="active sidebar-link">C 基础</a></li><li><a href="/pages/ea70f0/" class="sidebar-link">C 算法</a></li><li><a href="/pages/0fdfba/" class="sidebar-link">C 实例</a></li><li><a href="/pages/fdca4d/" class="sidebar-link">C Awesome</a></li></ul> </aside> <div><main class="page"> <div class="theme-vdoing-wrapper "><div class="articleInfo-wrap" data-v-f5f35434><div class="articleInfo" data-v-f5f35434><ul class="breadcrumbs" data-v-f5f35434><li data-v-f5f35434><a href="/" title="首页" class="iconfont icon-home router-link-active" data-v-f5f35434></a></li> <li data-v-f5f35434><a href="/categories/?category=C" title="分类" data-v-f5f35434>C</a></li> <!----></ul> <div class="info" data-v-f5f35434><!----> <div title="创建时间" class="date iconfont icon-riqi" data-v-f5f35434><a href="javascript:;" data-v-f5f35434>2020-12-02</a></div> <!----></div></div></div> <!----> <div class="content-wrapper"><div class="right-menu-wrapper"><div class="right-menu-margin"><div class="right-menu-content"></div></div></div> <h1><!---->
          C 基础
        </h1> <div class="theme-vdoing-content content__default"><h2 id="注释"><a href="#注释" class="header-anchor">#</a> 注释</h2> <div class="language-c line-numbers-mode"><pre class="language-c"><code><span class="token comment">// 单行注释</span>

<span class="token comment">/*
 * 多行注释
 */</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h2 id="头文件-include"><a href="#头文件-include" class="header-anchor">#</a> 头文件(include)</h2> <div class="language-c line-numbers-mode"><pre class="language-c"><code><span class="token comment">// 用#include来导入头文件，&lt;尖括号&gt;间的文件名是C标准库的头文件。</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdlib.h&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;string.h&gt;</span></span>

<span class="token comment">// 标准库以外的头文件，使用双引号代替尖括号，一般指当前目录</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&quot;my_header.h&quot;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h2 id="宏定义-define"><a href="#宏定义-define" class="header-anchor">#</a> 宏定义(#define)</h2> <div class="language-c line-numbers-mode"><pre class="language-c"><code><span class="token comment">// 常数，字符串，语句，函数</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token expression">PI     <span class="token number">3.14</span></span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token expression">STR    </span><span class="token string">&quot;圆周率约等于&quot;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token expression">PRINT  <span class="token function">printf</span><span class="token punctuation">(</span></span><span class="token string">&quot;hello world!&quot;</span><span class="token expression"><span class="token punctuation">)</span></span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token expression"><span class="token function">MAX</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span>b<span class="token punctuation">)</span>  <span class="token punctuation">(</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token operator">&gt;</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token operator">?</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token operator">:</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token punctuation">)</span></span></span>

<span class="token comment">// 多行换行 '\'</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token expression">Print   <span class="token function">printf</span><span class="token punctuation">(</span></span><span class="token string">&quot;这是第1条语句\n&quot;</span><span class="token expression"><span class="token punctuation">)</span><span class="token punctuation">;</span></span><span class="token punctuation">\</span>
 		    	<span class="token expression"><span class="token function">printf</span><span class="token punctuation">(</span></span><span class="token string">&quot;这是第2条语句\n&quot;</span><span class="token expression"><span class="token punctuation">)</span><span class="token punctuation">;</span></span><span class="token punctuation">\</span>
 		    	<span class="token expression"><span class="token function">printf</span><span class="token punctuation">(</span></span><span class="token string">&quot;这是第3条语句\n&quot;</span><span class="token expression"><span class="token punctuation">)</span></span></span>

<span class="token comment">// do{}while(0) 使用，使得宏定义作为代码块在代码中展开</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token expression"><span class="token function">LOG</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span> </span><span class="token punctuation">\</span>
<span class="token expression"><span class="token keyword">do</span><span class="token punctuation">{</span> </span><span class="token punctuation">\</span>
  <span class="token expression"><span class="token function">printf</span><span class="token punctuation">(</span><span class="token constant">stderr</span><span class="token punctuation">,</span> </span><span class="token string">&quot;[%s:%d %s %s]:%s\r\n&quot;</span><span class="token expression"><span class="token punctuation">,</span>  <span class="token constant">__FILE__</span><span class="token punctuation">,</span> <span class="token constant">__LINE__</span><span class="token punctuation">,</span> <span class="token constant">__DATE__</span><span class="token punctuation">,</span> <span class="token constant">__TIME__</span><span class="token punctuation">,</span> str<span class="token punctuation">)</span><span class="token punctuation">;</span> </span><span class="token punctuation">\</span>
<span class="token expression"><span class="token punctuation">}</span><span class="token keyword">while</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>   </span></span>

<span class="token comment">// 可变参数宏定义</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span>  <span class="token expression"><span class="token function">myprintf</span><span class="token punctuation">(</span>args<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span>  <span class="token function">printf</span><span class="token punctuation">(</span><span class="token constant">stderr</span><span class="token punctuation">,</span> args<span class="token punctuation">)</span></span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><h2 id="预编译"><a href="#预编译" class="header-anchor">#</a> 预编译</h2> <div class="language-c line-numbers-mode"><pre class="language-c"><code><span class="token comment">// 头文件常用</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">ifndef</span> <span class="token expression">_HEAD_FILE_H_</span></span>
   <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token expression">_HEAD_FILE_H_</span></span>
   <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">endif</span></span>

<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">if</span> <span class="token expression"><span class="token punctuation">[</span>FLAG<span class="token punctuation">]</span></span></span>
    如果给定条件为真，编译这部分代码
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">else</span></span>
    如果前面的#<span class="token keyword">if</span>给定条件不为真，编译这部分代码
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">endif</span>    </span>
     
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">ifdef</span> <span class="token expression"><span class="token punctuation">[</span>FLAG<span class="token punctuation">]</span>    </span></span>
    如果宏已经定义，编译代码
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">else</span> </span>
    如果宏没定义，编译代码
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">endif</span>  </span>

<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">ifndef</span> <span class="token expression"><span class="token punctuation">[</span>FLAG<span class="token punctuation">]</span>         </span></span>
    如果宏没有定义，则编译下面代码    
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">else</span> </span>
    如果宏定义，编译代码
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">endif</span>  </span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br></div></div><h2 id="类型-变量"><a href="#类型-变量" class="header-anchor">#</a> 类型&amp;变量</h2> <div class="language-c line-numbers-mode"><pre class="language-c"><code>
<span class="token comment">// 在使用变量之前我们必须先声明它们，变量在声明时需要指明其类型</span>
<span class="token comment">// int型（整型）变量一般占用4个字节</span>
<span class="token keyword">int</span> x_int <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token comment">// short型（短整型）变量一般占用2个字节</span>
<span class="token keyword">short</span> x_short <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token comment">// char型（字符型）变量会占用1个字节</span>
<span class="token keyword">char</span> x_char <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token keyword">char</span> y_char <span class="token operator">=</span> <span class="token string">'y'</span><span class="token punctuation">;</span> 
<span class="token comment">// long型（长整型）一般需要4个字节到8个字节; 而long long型则至少需要8个字节（64位）</span>
<span class="token keyword">long</span> x_long <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token keyword">long</span> <span class="token keyword">long</span> x_long_long <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> 
<span class="token comment">// float一般是用32位表示的浮点数字</span>
<span class="token keyword">float</span> x_float <span class="token operator">=</span> <span class="token number">0.0</span><span class="token punctuation">;</span>
<span class="token comment">// double一般是用64位表示的浮点数字</span>
<span class="token keyword">double</span> x_double <span class="token operator">=</span> <span class="token number">0.0</span><span class="token punctuation">;</span>

<span class="token comment">// 整数类型也可以有无符号的类型表示。这样这些变量就无法表示负数</span>
<span class="token comment">// 但是无符号整数所能表示的范围就可以比原来的整数大一些</span>
<span class="token keyword">unsigned</span> <span class="token keyword">short</span> ux_short<span class="token punctuation">;</span>
<span class="token keyword">unsigned</span> <span class="token keyword">int</span> ux_int<span class="token punctuation">;</span>
<span class="token keyword">unsigned</span> <span class="token keyword">long</span> <span class="token keyword">long</span> ux_long_long<span class="token punctuation">;</span>

<span class="token comment">// 以枚举的方式定义常数，MON自动被定义为2，TUE被定义为3，以此类推。</span>
<span class="token keyword">enum</span> <span class="token class-name">days</span> <span class="token punctuation">{</span>SUN <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span> MON<span class="token punctuation">,</span> TUE<span class="token punctuation">,</span> WED<span class="token punctuation">,</span> THU<span class="token punctuation">,</span> FRI<span class="token punctuation">,</span> SAT<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">// 指针类型在声明中以*开头</span>
<span class="token keyword">int</span><span class="token operator">*</span> px<span class="token punctuation">,</span> not_a_pointer<span class="token punctuation">;</span> <span class="token comment">// px是一个指向int型的指针</span>
px <span class="token operator">=</span> <span class="token operator">&amp;</span>x<span class="token punctuation">;</span> <span class="token comment">// 把x的地址保存到px中</span>

<span class="token comment">// 结构体</span>
<span class="token keyword">struct</span> <span class="token class-name">student</span><span class="token punctuation">{</span>
    <span class="token keyword">char</span> <span class="token operator">*</span>name<span class="token punctuation">;</span>  <span class="token comment">//姓名</span>
    <span class="token keyword">int</span> age<span class="token punctuation">;</span>  <span class="token comment">//年龄</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">// 自定义数据类型，定义上面的结构体类型别名Stu</span>
<span class="token keyword">typedef</span> <span class="token keyword">struct</span> <span class="token class-name">student</span> Stu
<span class="token comment">// 上面的结构体定义等价于</span>
<span class="token keyword">typedef</span> <span class="token keyword">struct</span> <span class="token class-name">student</span><span class="token punctuation">{</span> 
    <span class="token keyword">char</span> <span class="token operator">*</span>name<span class="token punctuation">;</span>  <span class="token comment">//姓名</span>
    <span class="token keyword">int</span> age<span class="token punctuation">;</span>  <span class="token comment">//年龄</span>
<span class="token punctuation">}</span> Stu<span class="token punctuation">;</span>

<span class="token comment">// 数组</span>
<span class="token keyword">char</span> my_array<span class="token punctuation">[</span><span class="token number">20</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token number">0</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">char</span> my_array<span class="token punctuation">[</span><span class="token punctuation">]</span>   <span class="token operator">=</span> <span class="token string">&quot;foobarbazquirk&quot;</span><span class="token punctuation">;</span>
<span class="token comment">// 多维数组</span>
<span class="token keyword">int</span> multi_array<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span><span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// 多个变量声明的简写及初始化</span>
<span class="token keyword">int</span> a<span class="token punctuation">,</span> b<span class="token punctuation">,</span> c<span class="token punctuation">;</span>
<span class="token keyword">int</span> i1 <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span> i2 <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>

<span class="token comment">// 类型大小判断,sizeof(T) 可以返回T类型在运行的机器上占用多少个字节 </span>
<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">&quot;%zu\n&quot;</span><span class="token punctuation">,</span> <span class="token keyword">sizeof</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// =&gt; 4 (大多数的机器字长为4)</span>
size_t size <span class="token operator">=</span> <span class="token keyword">sizeof</span><span class="token punctuation">(</span>a<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// a++ 不会被演算</span>

<span class="token comment">// 类型转换,在C中每个变量都有类型，你可以将变量的类型进行转换,不同类型转换可能会有数据丢失</span>
<span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1000</span><span class="token punctuation">;</span>
<span class="token keyword">char</span> c <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">char</span><span class="token punctuation">)</span>i<span class="token punctuation">;</span>
<span class="token comment">// 类型转换时可能会造成溢出，而且不会抛出警告</span>
<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">&quot;%d\n&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token keyword">char</span><span class="token punctuation">)</span> <span class="token number">257</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// =&gt; 1 (char的最大值为255，假定char为8位长)</span>

<span class="token comment">// 整数型和浮点型可以互相转换</span>
<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">&quot;%f\n&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token keyword">float</span><span class="token punctuation">)</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// %f 格式化单精度浮点</span>
<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">&quot;%lf\n&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token keyword">double</span><span class="token punctuation">)</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// %lf 格式化双精度浮点</span>
<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">&quot;%d\n&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token keyword">char</span><span class="token punctuation">)</span><span class="token number">100.0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 特殊字符</span>
<span class="token string">'\a'</span> <span class="token comment">// bell</span>
<span class="token string">'\n'</span> <span class="token comment">// 换行</span>
<span class="token string">'\t'</span> <span class="token comment">// tab</span>
<span class="token string">'\v'</span> <span class="token comment">// vertical tab</span>
<span class="token string">'\f'</span> <span class="token comment">// formfeed</span>
<span class="token string">'\r'</span> <span class="token comment">// 回车</span>
<span class="token string">'\b'</span> <span class="token comment">// 退格</span>
<span class="token string">'\0'</span> <span class="token comment">// null，通常置于字符串的最后。 hello\n\0. 按照惯例，\0用于标记字符串的末尾。</span>
<span class="token string">'\\'</span> <span class="token comment">// 反斜杠</span>
<span class="token string">'\?'</span> <span class="token comment">// 问号</span>
<span class="token string">'\''</span> <span class="token comment">// 单引号</span>
<span class="token string">'\&quot;'</span> <span class="token comment">// 双引号</span>
<span class="token string">'\xhh'</span> <span class="token comment">// 十六进制数字. 例子: '\xb' = vertical tab</span>
<span class="token string">'\ooo'</span> <span class="token comment">// 八进制数字. 例子: '\013' = vertical tab</span>

<span class="token comment">// 打印格式：</span>
<span class="token string">&quot;%d&quot;</span>    <span class="token comment">// 整数</span>
<span class="token string">&quot;%3d&quot;</span>   <span class="token comment">// 3位以上整数 （右对齐文本）</span>
<span class="token string">&quot;%s&quot;</span>    <span class="token comment">// 字符串</span>
<span class="token string">&quot;%f&quot;</span>    <span class="token comment">// float</span>
<span class="token string">&quot;%ld&quot;</span>   <span class="token comment">// long</span>
<span class="token string">&quot;%3.2f&quot;</span> <span class="token comment">// 左3位以上、右2位以上十进制浮</span>
<span class="token string">&quot;%7.4s&quot;</span> <span class="token comment">// (字符串同样适用)</span>
<span class="token string">&quot;%c&quot;</span>    <span class="token comment">// 字母</span>
<span class="token string">&quot;%p&quot;</span>    <span class="token comment">// 指针</span>
<span class="token string">&quot;%x&quot;</span>    <span class="token comment">// 十六进制</span>
<span class="token string">&quot;%o&quot;</span>    <span class="token comment">// 八进制</span>
<span class="token string">&quot;%%&quot;</span>    <span class="token comment">// 打印 %</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br><span class="line-number">90</span><br><span class="line-number">91</span><br><span class="line-number">92</span><br><span class="line-number">93</span><br><span class="line-number">94</span><br><span class="line-number">95</span><br><span class="line-number">96</span><br><span class="line-number">97</span><br><span class="line-number">98</span><br><span class="line-number">99</span><br><span class="line-number">100</span><br><span class="line-number">101</span><br><span class="line-number">102</span><br></div></div><h2 id="运算"><a href="#运算" class="header-anchor">#</a> 运算</h2> <div class="language-c line-numbers-mode"><pre class="language-c"><code><span class="token comment">// 算数运算直截了当</span>
<span class="token keyword">int</span> i1 <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span> i2 <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>
<span class="token keyword">float</span> f1 <span class="token operator">=</span> <span class="token number">0.5</span><span class="token punctuation">,</span> f2 <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
i1 <span class="token operator">+</span> i2<span class="token punctuation">;</span> <span class="token comment">// =&gt; 3</span>
i2 <span class="token operator">-</span> i1<span class="token punctuation">;</span> <span class="token comment">// =&gt; 1</span>
i2 <span class="token operator">*</span> i1<span class="token punctuation">;</span> <span class="token comment">// =&gt; 2</span>
i1 <span class="token operator">/</span> i2<span class="token punctuation">;</span> <span class="token comment">// =&gt; 0 (0.5，但会被化整为 0)</span>

f1 <span class="token operator">/</span> f2<span class="token punctuation">;</span> <span class="token comment">// =&gt; 0.5, 也许会有很小的误差，浮点数和浮点数运算都是近似值</span>

<span class="token number">11</span> <span class="token operator">%</span> <span class="token number">3</span><span class="token punctuation">;</span> <span class="token comment">// =&gt; 2 取余运算</span>

<span class="token comment">// 你多半会觉得比较操作符很熟悉, 不过C中没有布尔类型</span>
<span class="token comment">// 而是用整形替代</span>
<span class="token comment">// (C99中有_Bool或bool。)</span>
<span class="token comment">// 0为假, 其他均为真. (比较操作符的返回值总是返回0或1)</span>
<span class="token number">3</span> <span class="token operator">==</span> <span class="token number">2</span><span class="token punctuation">;</span> <span class="token comment">// =&gt; 0 (false)</span>
<span class="token number">3</span> <span class="token operator">!=</span> <span class="token number">2</span><span class="token punctuation">;</span> <span class="token comment">// =&gt; 1 (true)</span>
<span class="token number">3</span> <span class="token operator">&gt;</span> <span class="token number">2</span><span class="token punctuation">;</span> <span class="token comment">// =&gt; 1</span>
<span class="token number">3</span> <span class="token operator">&lt;</span> <span class="token number">2</span><span class="token punctuation">;</span> <span class="token comment">// =&gt; 0</span>
<span class="token number">2</span> <span class="token operator">&lt;=</span> <span class="token number">2</span><span class="token punctuation">;</span> <span class="token comment">// =&gt; 1</span>
<span class="token number">2</span> <span class="token operator">&gt;=</span> <span class="token number">2</span><span class="token punctuation">;</span> <span class="token comment">// =&gt; 1</span>

<span class="token comment">// 逻辑运算符适用于整数</span>
<span class="token operator">!</span><span class="token number">3</span><span class="token punctuation">;</span> <span class="token comment">// =&gt; 0 (非)</span>
<span class="token operator">!</span><span class="token number">0</span><span class="token punctuation">;</span> <span class="token comment">// =&gt; 1</span>
<span class="token number">1</span> <span class="token operator">&amp;&amp;</span> <span class="token number">1</span><span class="token punctuation">;</span> <span class="token comment">// =&gt; 1 (且)</span>
<span class="token number">0</span> <span class="token operator">&amp;&amp;</span> <span class="token number">1</span><span class="token punctuation">;</span> <span class="token comment">// =&gt; 0</span>
<span class="token number">0</span> <span class="token operator">||</span> <span class="token number">1</span><span class="token punctuation">;</span> <span class="token comment">// =&gt; 1 (或)</span>
<span class="token number">0</span> <span class="token operator">||</span> <span class="token number">0</span><span class="token punctuation">;</span> <span class="token comment">// =&gt; 0</span>

<span class="token comment">// 条件表达式 （ ? : ）</span>
<span class="token keyword">int</span> a <span class="token operator">=</span> <span class="token number">5</span><span class="token punctuation">;</span>
<span class="token keyword">int</span> b <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>
<span class="token keyword">int</span> z<span class="token punctuation">;</span>
z <span class="token operator">=</span> <span class="token punctuation">(</span>a <span class="token operator">&gt;</span> b<span class="token punctuation">)</span> <span class="token operator">?</span> a <span class="token operator">:</span> b<span class="token punctuation">;</span> <span class="token comment">//  10 “若a &gt; b返回a，否则返回b。”</span>

<span class="token comment">// 增、减</span>
<span class="token keyword">char</span> <span class="token operator">*</span>s <span class="token operator">=</span> <span class="token string">&quot;iLoveC&quot;</span>
<span class="token keyword">int</span> j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
s<span class="token punctuation">[</span>j<span class="token operator">++</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// &quot;i&quot; 返回s的第j项，然后增加j的值。</span>
j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
s<span class="token punctuation">[</span><span class="token operator">++</span>j<span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// =&gt; &quot;L&quot;  增加j的值，然后返回s的第j项。</span>
<span class="token comment">// j-- 和 --j 同理</span>

<span class="token comment">// 位运算</span>
<span class="token operator">~</span><span class="token number">0x0F</span><span class="token punctuation">;</span> <span class="token comment">// =&gt; 0xF0 (取反)</span>
<span class="token number">0x0F</span> <span class="token operator">&amp;</span> <span class="token number">0xF0</span><span class="token punctuation">;</span> <span class="token comment">// =&gt; 0x00 (和)</span>
<span class="token number">0x0F</span> <span class="token operator">|</span> <span class="token number">0xF0</span><span class="token punctuation">;</span> <span class="token comment">// =&gt; 0xFF (或)</span>
<span class="token number">0x04</span> <span class="token operator">^</span> <span class="token number">0x0F</span><span class="token punctuation">;</span> <span class="token comment">// =&gt; 0x0B (异或)</span>
<span class="token number">0x01</span> <span class="token operator">&lt;&lt;</span> <span class="token number">1</span><span class="token punctuation">;</span> <span class="token comment">// =&gt; 0x02 (左移1位)</span>
<span class="token number">0x02</span> <span class="token operator">&gt;&gt;</span> <span class="token number">1</span><span class="token punctuation">;</span> <span class="token comment">// =&gt; 0x01 (右移1位)</span>

<span class="token comment">// 对有符号整数进行移位操作要小心 —— 以下未定义：</span>
<span class="token comment">// 有符号整数位移至符号位 int a = 1 &lt;&lt; 32</span>
<span class="token comment">// 左移位一个负数 int a = -1 &lt;&lt; 2</span>
<span class="token comment">// 移位超过或等于该类型数值的长度</span>
<span class="token keyword">int</span> a <span class="token operator">=</span> <span class="token number">1</span> <span class="token operator">&lt;&lt;</span> <span class="token number">32</span><span class="token punctuation">;</span> <span class="token comment">// 假定int32位</span>

<span class="token comment">// 演算优先级</span>
<span class="token comment">//---------------------------------------------------//</span>
<span class="token comment">//        操作符                     | 组合          //</span>
<span class="token comment">//---------------------------------------------------//</span>
<span class="token comment">// () [] -&gt; .                        | 从左到右      //</span>
<span class="token comment">// ! ~ ++ -- + = *(type)sizeof       | 从右到左      //</span>
<span class="token comment">// * / %                             | 从左到右      //</span>
<span class="token comment">// + -                               | 从左到右      //</span>
<span class="token comment">// &lt;&lt; &gt;&gt;                             | 从左到右      //</span>
<span class="token comment">// &lt; &lt;= &gt; &gt;=                         | 从左到右      //</span>
<span class="token comment">// == !=                             | 从左到右      //</span>
<span class="token comment">// &amp;                                 | 从左到右      //</span>
<span class="token comment">// ^                                 | 从左到右      //</span>
<span class="token comment">// |                                 | 从左到右      //</span>
<span class="token comment">// &amp;&amp;                                | 从左到右      //</span>
<span class="token comment">// ||                                | 从左到右      //</span>
<span class="token comment">// ?:                                | 从右到左      //</span>
<span class="token comment">// = += -= *= /= %= &amp;= ^= |= &lt;&lt;= &gt;&gt;= | 从右到左      //</span>
<span class="token comment">// ,                                 | 从左到右      //</span>
<span class="token comment">//---------------------------------------------------//</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br></div></div><h2 id="控制结构"><a href="#控制结构" class="header-anchor">#</a> 控制结构</h2> <div class="language-c line-numbers-mode"><pre class="language-c"><code><span class="token comment">// 条件判断</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">&quot;I am never run\n&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">&quot;I am also never run\n&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
  <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">&quot;I print\n&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// While循环</span>
<span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token keyword">while</span> <span class="token punctuation">(</span>i <span class="token operator">&lt;</span> <span class="token number">10</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// 任何非0的值均为真</span>
    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">&quot;%d, &quot;</span><span class="token punctuation">,</span> i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// i++ 在取值过后自增</span>
<span class="token punctuation">}</span> 
<span class="token comment">// =&gt;  打印 &quot;0, 1, 2, 3, 4, 5, 6, 7, 8, 9, &quot;</span>

<span class="token keyword">int</span> kk <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token keyword">do</span> <span class="token punctuation">{</span>
    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">&quot;%d, &quot;</span><span class="token punctuation">,</span> kk<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token operator">++</span>kk <span class="token operator">&lt;</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ++kk 先自增，再被取值</span>
<span class="token comment">// =&gt; 打印 &quot;0, 1, 2, 3, 4, 5, 6, 7, 8, 9, &quot;</span>

<span class="token comment">// For 循环</span>
<span class="token keyword">int</span> jj<span class="token punctuation">;</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span>jj<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> jj <span class="token operator">&lt;</span> <span class="token number">10</span><span class="token punctuation">;</span> jj<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">&quot;%d, &quot;</span><span class="token punctuation">,</span> jj<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> <span class="token comment">// =&gt; 打印 &quot;0, 1, 2, 3, 4, 5, 6, 7, 8, 9, &quot;</span>

<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">&quot;\n&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 循环和函数必须有主体部分，如果不需要主体部分：</span>
<span class="token keyword">int</span> i<span class="token punctuation">;</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span>i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> <span class="token number">5</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token punctuation">;</span> <span class="token comment">// 使用分号表达主体（null语句）</span>
<span class="token punctuation">}</span>

<span class="token comment">// 多重分支：switch()</span>
<span class="token keyword">switch</span> <span class="token punctuation">(</span>some_integral_expression<span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token keyword">case</span> <span class="token number">0</span><span class="token operator">:</span> <span class="token comment">// 标签必须是整数常量表达式</span>
    <span class="token function">do_stuff</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">break</span><span class="token punctuation">;</span> <span class="token comment">// 如果不使用break，控制结构会继续执行下面的标签</span>
<span class="token keyword">case</span> <span class="token number">1</span><span class="token operator">:</span>
    <span class="token function">do_something_else</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">break</span><span class="token punctuation">;</span>
<span class="token keyword">default</span><span class="token operator">:</span>
    <span class="token comment">// 假设 `some_integral_expression` 不匹配任何标签</span>
    <span class="token function">fputs</span><span class="token punctuation">(</span><span class="token string">&quot;error!\n&quot;</span><span class="token punctuation">,</span> <span class="token constant">stderr</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">exit</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">break</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br></div></div><h2 id="指针"><a href="#指针" class="header-anchor">#</a> 指针</h2> <div class="language-c line-numbers-mode"><pre class="language-c"><code><span class="token comment">// 指针变量是用来储存内存地址的变量，指针变量的声明也会告诉它所指向的数据的类型</span>
<span class="token comment">// 指针类型在声明中以*开头</span>
<span class="token keyword">int</span> x <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token keyword">int</span><span class="token operator">*</span> px<span class="token punctuation">;</span> <span class="token comment">// px是一个指向int型的指针</span>
px <span class="token operator">=</span> <span class="token operator">&amp;</span>x<span class="token punctuation">;</span> <span class="token comment">// 把x的地址保存到px中</span>
<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">&quot;%p\n&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token keyword">void</span> <span class="token operator">*</span><span class="token punctuation">)</span>px<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// =&gt; 输出变量x的内存地址</span>

<span class="token comment">// 要得到某个指针指向的内容的值，可以在指针前加一个*来取得</span>
<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">&quot;%d\n&quot;</span><span class="token punctuation">,</span> <span class="token operator">*</span>px<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// =&gt; 输出 0, 即x的值</span>

<span class="token comment">// 你也可以改变指针所指向的值，此时你需要取消引用上添加括号，因为++比*的优先级更高</span>
<span class="token punctuation">(</span><span class="token operator">*</span>px<span class="token punctuation">)</span><span class="token operator">++</span><span class="token punctuation">;</span> <span class="token comment">// 把px所指向的值增加1</span>
<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">&quot;%d\n&quot;</span><span class="token punctuation">,</span> <span class="token operator">*</span>px<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// =&gt; 输出 1</span>
<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">&quot;%d\n&quot;</span><span class="token punctuation">,</span> x<span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">// =&gt; 输出 1</span>

<span class="token comment">// 数组是分配一系列连续空间的常用方式</span>
<span class="token keyword">int</span> x_array<span class="token punctuation">[</span><span class="token number">20</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">int</span> x<span class="token punctuation">;</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span>x<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> x<span class="token operator">&lt;</span><span class="token number">20</span><span class="token punctuation">;</span> x<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    x_array<span class="token punctuation">[</span>x<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">20</span> <span class="token operator">-</span> x<span class="token punctuation">;</span>
<span class="token punctuation">}</span> <span class="token comment">// 初始化 x_array 为 20, 19, 18,... 2, 1</span>

<span class="token comment">// 声明一个整型的指针，并初始化为指向x_array</span>
<span class="token keyword">int</span><span class="token operator">*</span> x_ptr <span class="token operator">=</span> x_array<span class="token punctuation">;</span>
<span class="token comment">// x_ptr现在指向了数组的第一个元素(即整数20). </span>
<span class="token comment">// 这是因为数组通常衰减为指向它们的第一个元素的指针。</span>
<span class="token comment">// 例如，当一个数组被传递给一个函数或者绑定到一个指针时，</span>
<span class="token comment">//它衰减为(隐式转化为）一个指针。</span>
<span class="token comment">// 例外： 当数组是`&amp;`操作符的参数：</span>
<span class="token keyword">int</span> arr<span class="token punctuation">[</span><span class="token number">10</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">int</span> <span class="token punctuation">(</span><span class="token operator">*</span>ptr_to_arr<span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">10</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token operator">&amp;</span>arr<span class="token punctuation">;</span> <span class="token comment">// &amp;arr的类型不是`int *`！</span>
                              <span class="token comment">// 它的类型是指向数组的指针（数组由10个int组成）</span>
<span class="token comment">// 或者当数组是字符串字面量（初始化字符数组）</span>
<span class="token keyword">char</span> arr<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">&quot;foobarbazquirk&quot;</span><span class="token punctuation">;</span>
<span class="token comment">// 或者当它是`sizeof`或`alignof`操作符的参数时：</span>
<span class="token keyword">int</span> arr<span class="token punctuation">[</span><span class="token number">10</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">int</span> <span class="token operator">*</span>ptr <span class="token operator">=</span> arr<span class="token punctuation">;</span> <span class="token comment">// 等价于 int *ptr = &amp;arr[0];</span>

<span class="token comment">// 指针的增减多少是依据它本身的类型而定的</span>
<span class="token comment">// （这被称为指针算术）</span>
<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">&quot;%d\n&quot;</span><span class="token punctuation">,</span> <span class="token operator">*</span><span class="token punctuation">(</span>x_ptr <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// =&gt; 打印 19</span>
<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">&quot;%d\n&quot;</span><span class="token punctuation">,</span> x_array<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">// =&gt; 打印 19</span>

<span class="token comment">// 你也可以通过标准库函数malloc来实现动态分配</span>
<span class="token comment">// 这个函数接受一个代表容量的参数，参数类型为`size_t`</span>
<span class="token comment">// 系统一般会从堆区分配指定容量字节大小的空间</span>
<span class="token comment">// （在一些系统，例如嵌入式系统中这点不一定成立</span>
<span class="token comment">// C标准对此未置一词。）</span>
<span class="token keyword">int</span> <span class="token operator">*</span>my_ptr <span class="token operator">=</span> <span class="token function">malloc</span><span class="token punctuation">(</span><span class="token keyword">sizeof</span><span class="token punctuation">(</span><span class="token operator">*</span>my_ptr<span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span>xx<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> xx<span class="token operator">&lt;</span><span class="token number">20</span><span class="token punctuation">;</span> xx<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token operator">*</span><span class="token punctuation">(</span>my_ptr <span class="token operator">+</span> xx<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">20</span> <span class="token operator">-</span> xx<span class="token punctuation">;</span> <span class="token comment">// my_ptr[xx] = 20-xx</span>
<span class="token punctuation">}</span> <span class="token comment">// 初始化内存为 20, 19, 18, 17... 2, 1 (类型为int）</span>

<span class="token comment">// 对未分配的内存进行取消引用会产生未定义的结果</span>
<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">&quot;%d\n&quot;</span><span class="token punctuation">,</span> <span class="token operator">*</span><span class="token punctuation">(</span>my_ptr <span class="token operator">+</span> <span class="token number">21</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// =&gt; 谁知道会输出什么</span>

<span class="token comment">// malloc分配的区域需要手动释放</span>
<span class="token comment">// 否则没人能够再次使用这块内存，直到程序结束为止</span>
<span class="token function">free</span><span class="token punctuation">(</span>my_ptr<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 字符串通常是字符数组，但是经常用字符指针表示</span>
<span class="token comment">// (它是指向数组的第一个元素的指针)</span>
<span class="token comment">// 一个优良的实践是使用`const char *`来引用一个字符串字面量，</span>
<span class="token comment">// 因为字符串字常量不应当被修改（即&quot;foo&quot;[0] = 'a'犯了大忌）</span>
<span class="token keyword">const</span> <span class="token keyword">char</span><span class="token operator">*</span> my_str <span class="token operator">=</span> <span class="token string">&quot;This is my very own string&quot;</span><span class="token punctuation">;</span>
<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">&quot;%c\n&quot;</span><span class="token punctuation">,</span> <span class="token operator">*</span>my_str<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// =&gt; 'T'</span>

<span class="token comment">// 如果字符串是数组，（多半是用字符串字面量初始化的）</span>
<span class="token comment">// 情况就不一样了，字符串位于可写的内存中</span>
<span class="token keyword">char</span> foo<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">&quot;foo&quot;</span><span class="token punctuation">;</span>
foo<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">'a'</span><span class="token punctuation">;</span> <span class="token comment">// 这是合法的，foo现在包含&quot;aoo&quot;</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br></div></div><h2 id="函数"><a href="#函数" class="header-anchor">#</a> 函数</h2> <div class="language-c line-numbers-mode"><pre class="language-c"><code><span class="token comment">// 函数的声明可以事先在.h文件中定义，</span>
<span class="token comment">// 也可以直接在.c文件的头部定义。</span>
<span class="token keyword">void</span> <span class="token function">function_1</span><span class="token punctuation">(</span><span class="token keyword">char</span> c<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">void</span> <span class="token function">function_2</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 如果函数调用在main()之后，那么必须声明在main()之前</span>
<span class="token comment">// 你的程序的入口是一个返回值为整型的main函数</span>
<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">char</span> c<span class="token punctuation">;</span>
    <span class="token function">function_1</span><span class="token punctuation">(</span>c<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">function_2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// 函数声明语法:</span>
<span class="token comment">// &lt;返回值类型&gt; &lt;函数名称&gt;(&lt;参数&gt;)</span>
<span class="token keyword">int</span> <span class="token function">add_two_ints</span><span class="token punctuation">(</span><span class="token keyword">int</span> x1<span class="token punctuation">,</span> <span class="token keyword">int</span> x2<span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">return</span> x1 <span class="token operator">+</span> x2<span class="token punctuation">;</span> <span class="token comment">// 用return来返回一个值</span>
<span class="token punctuation">}</span>

<span class="token comment">/*
函数是按值传递的。当调用一个函数的时候，传递给函数的参数
是原有值的拷贝（数组除外）。你在函数内对参数所进行的操作
不会改变该参数原有的值。但是你可以通过指针来传递引用，这样函数就可以更改值
例子：字符串本身翻转
*/</span>

<span class="token comment">// 类型为void的函数没有返回值</span>
<span class="token keyword">void</span> <span class="token function">str_reverse</span><span class="token punctuation">(</span><span class="token keyword">char</span> <span class="token operator">*</span>str_in<span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">char</span> tmp<span class="token punctuation">;</span>
    <span class="token keyword">int</span> ii <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    size_t len <span class="token operator">=</span> <span class="token function">strlen</span><span class="token punctuation">(</span>str_in<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// `strlen()`` 是C标准库函数</span>
    <span class="token keyword">for</span><span class="token punctuation">(</span>ii <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> ii <span class="token operator">&lt;</span> len <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">;</span> ii<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        tmp <span class="token operator">=</span> str_in<span class="token punctuation">[</span>ii<span class="token punctuation">]</span><span class="token punctuation">;</span>
        str_in<span class="token punctuation">[</span>ii<span class="token punctuation">]</span> <span class="token operator">=</span> str_in<span class="token punctuation">[</span>len <span class="token operator">-</span> ii <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// 从倒数第ii个开始</span>
        str_in<span class="token punctuation">[</span>len <span class="token operator">-</span> ii <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> tmp<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// 如果引用函数之外的变量，必须使用extern关键字</span>
<span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token keyword">void</span> <span class="token function">testFunc</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">extern</span> <span class="token keyword">int</span> i<span class="token punctuation">;</span> <span class="token comment">// 使用外部变量 i</span>
<span class="token punctuation">}</span>

<span class="token comment">// 使用static确保external变量为源文件私有</span>
<span class="token keyword">static</span> <span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> <span class="token comment">// 其他使用 testFunc()的文件无法访问变量i</span>
<span class="token keyword">void</span> <span class="token function">testFunc</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">extern</span> <span class="token keyword">int</span> i<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">//**你同样可以声明函数为static**</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br></div></div><h2 id="函数指针"><a href="#函数指针" class="header-anchor">#</a> 函数指针</h2> <div class="language-c line-numbers-mode"><pre class="language-c"><code><span class="token comment">/*
在运行时，函数本身也被存放到某块内存区域当中
函数指针就像其他指针一样（不过是存储一个内存地址） 但却可以被用来直接调用函数,
并且可以四处传递回调函数
但是，定义的语法初看令人有些迷惑
例子：通过指针调用str_reverse
*/</span>
<span class="token keyword">void</span> <span class="token function">str_reverse_through_pointer</span><span class="token punctuation">(</span><span class="token keyword">char</span> <span class="token operator">*</span>str_in<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 定义一个函数指针 f. </span>
    <span class="token keyword">void</span> <span class="token punctuation">(</span><span class="token operator">*</span>f<span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token keyword">char</span> <span class="token operator">*</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 签名一定要与目标函数相同</span>
    f <span class="token operator">=</span> <span class="token operator">&amp;</span>str_reverse<span class="token punctuation">;</span> <span class="token comment">// 将函数的地址在运行时赋给指针</span>
    <span class="token punctuation">(</span><span class="token operator">*</span>f<span class="token punctuation">)</span><span class="token punctuation">(</span>str_in<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 通过指针调用函数</span>
    <span class="token comment">// f(str_in); // 等价于这种调用方式</span>
<span class="token punctuation">}</span>

<span class="token comment">/*
只要函数签名是正确的，任何时候都能将任何函数赋给某个函数指针
为了可读性和简洁性，函数指针经常和typedef搭配使用：
*/</span>

<span class="token keyword">typedef</span> <span class="token keyword">void</span> <span class="token punctuation">(</span><span class="token operator">*</span>my_fnp_type<span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token keyword">char</span> <span class="token operator">*</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 实际声明函数指针会这么用:</span>
<span class="token comment">// ...</span>
<span class="token comment">// my_fnp_type f; </span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br></div></div><h2 id="结构体"><a href="#结构体" class="header-anchor">#</a> 结构体</h2> <div class="language-c line-numbers-mode"><pre class="language-c"><code><span class="token comment">// struct是数据的集合，成员依序分配，按照编写的顺序</span>
<span class="token keyword">struct</span> <span class="token class-name">rectangle</span> <span class="token punctuation">{</span>
    <span class="token keyword">int</span> width<span class="token punctuation">;</span>
    <span class="token keyword">int</span> height<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">// 一般而言，以下断言不成立：</span>
<span class="token comment">// sizeof(struct rectangle) == sizeof(int) + sizeof(int)</span>
<span class="token comment">// 这是因为structure成员之间可能存在潜在的间隙（为了对齐）[1]</span>

<span class="token keyword">void</span> <span class="token function">function_1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">struct</span> <span class="token class-name">rectangle</span> my_rec<span class="token punctuation">;</span>
    <span class="token comment">// 通过 . 来访问结构中的数据</span>
    my_rec<span class="token punctuation">.</span>width  <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>
    my_rec<span class="token punctuation">.</span>height <span class="token operator">=</span> <span class="token number">20</span><span class="token punctuation">;</span>
    <span class="token comment">// 你也可以声明指向结构体的指针</span>
    <span class="token keyword">struct</span> <span class="token class-name">rectangle</span> <span class="token operator">*</span>my_rec_ptr <span class="token operator">=</span> <span class="token operator">&amp;</span>my_rec<span class="token punctuation">;</span>
    <span class="token comment">// 通过取消引用来改变结构体的成员...</span>
    <span class="token punctuation">(</span><span class="token operator">*</span>my_rec_ptr<span class="token punctuation">)</span><span class="token punctuation">.</span>width <span class="token operator">=</span> <span class="token number">30</span><span class="token punctuation">;</span>
    <span class="token comment">// ... 或者用 -&gt; 操作符作为简写提高可读性</span>
    my_rec_ptr<span class="token operator">-&gt;</span>height <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span> <span class="token comment">// Same as (*my_rec_ptr).height = 10;</span>
<span class="token punctuation">}</span>

<span class="token comment">// 你也可以用typedef来给一个结构体起一个别名</span>
<span class="token keyword">typedef</span> <span class="token keyword">struct</span> <span class="token class-name">rectangle</span> rect<span class="token punctuation">;</span>

<span class="token keyword">int</span> <span class="token function">area</span><span class="token punctuation">(</span>rect r<span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">return</span> r<span class="token punctuation">.</span>width <span class="token operator">*</span> r<span class="token punctuation">.</span>height<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// 如果struct较大，你可以通过指针传递，避免</span>
<span class="token comment">// 复制整个struct。</span>
<span class="token keyword">int</span> <span class="token function">area</span><span class="token punctuation">(</span><span class="token keyword">const</span> rect <span class="token operator">*</span>r<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">return</span> r<span class="token operator">-&gt;</span>width <span class="token operator">*</span> r<span class="token operator">-&gt;</span>height<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br></div></div></div></div> <div class="page-edit"><!----> <!----> <div class="last-updated"><span class="prefix">上次更新:</span> <span class="time">2020/12/13, 10:52:03</span></div></div> <div class="page-nav-wapper"><!----> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/pages/9ed42d/" class="prev">C 代码规范</a></span> <span class="next"><a href="/pages/ea70f0/">C 算法</a>→
      </span></p></div></div></div> <!----> </main></div> <div class="footer"><div class="icons"><a href="mailto:619824701@qq.com" title="发邮件" target="_blank" class="iconfont icon-youjian"></a><a href="https://github.com/thesamplecode" title="GitHub" target="_blank" class="iconfont icon-github"></a></div> 
  Theme by
  <a href="https://github.com/xugaoyi/vuepress-theme-vdoing" target="_blank" title="本站主题">Vdoing</a> 
    | Copyright © 2021-2021
    <span>TheSampleCode | MIT License</span></div> <div class="buttons"><div title="返回顶部" class="button blur go-to-top iconfont icon-fanhuidingbu" style="display:none;"></div> <div title="去评论" class="button blur go-to-comment iconfont icon-pinglun" style="display:none;"></div> <div title="主题模式" class="button blur theme-mode-but iconfont icon-zhuti"><ul class="select-box" style="display:none;"><li class="iconfont icon-zidong">跟随系统</li><li class="iconfont icon-rijianmoshi">浅色模式</li><li class="iconfont icon-yejianmoshi">深色模式</li><li class="iconfont icon-yuedu">阅读模式</li></ul></div></div> <!----></div><div class="global-ui"><div></div></div></div>
    <script src="/assets/js/app.c9fc3f08.js" defer></script><script src="/assets/js/2.72085123.js" defer></script><script src="/assets/js/7.bfc3c3b0.js" defer></script>
  </body>
</html>